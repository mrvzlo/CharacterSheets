(function(e){function t(t){for(var n,s,r=t[0],o=t[1],l=t[2],h=0,u=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&u.push(c[s][0]),c[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var o=a[r];0!==c[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},c={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/DnDSheet/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=o;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},1:function(e,t){},"15cb":function(e,t,a){"use strict";a("bf5b")},2:function(e,t){},a940:function(e){e.exports=JSON.parse('[{"id":0,"short":"СИЛ","color":"ecc"},{"id":1,"short":"ЛОВ","color":"cec"},{"id":2,"short":"ВЫН","color":"eec"},{"id":3,"short":"ИНТ","color":"cce"},{"id":4,"short":"МУД","color":"cee"},{"id":5,"short":"ХАР","color":"ece"}]')},b757:function(e){e.exports=JSON.parse('[{"id":1,"name":"Бард","bone":"8"},{"id":2,"name":"Варвар","bone":"12"},{"id":3,"name":"Воин","bone":"10"},{"id":4,"name":"Волшебник","bone":"6"},{"id":5,"name":"Друид","bone":"8"},{"id":6,"name":"Жрец","bone":"8"},{"id":7,"name":"Колдун","bone":"8"},{"id":8,"name":"Монах","bone":"8"},{"id":9,"name":"Паладин","bone":"10"},{"id":10,"name":"Плут","bone":"8"},{"id":11,"name":"Следопыт","bone":"10"},{"id":12,"name":"Чародей","bone":"6"}]')},ba07:function(e){e.exports=JSON.parse('[{"id":0,"type":0,"attribute":0,"name":"Спасбросок"},{"id":1,"type":0,"attribute":1,"name":"Спасбросок"},{"id":2,"type":0,"attribute":2,"name":"Спасбросок"},{"id":3,"type":0,"attribute":3,"name":"Спасбросок"},{"id":4,"type":0,"attribute":4,"name":"Спасбросок"},{"id":5,"type":0,"attribute":5,"name":"Спасбросок"},{"id":6,"type":10,"attribute":1,"name":"Акробатика"},{"id":9,"type":13,"attribute":0,"name":"Атлетика"},{"id":14,"type":18,"attribute":3,"name":"Анализ"},{"id":17,"type":21,"attribute":4,"name":"Внимательность"},{"id":21,"type":25,"attribute":4,"name":"Выживание"},{"id":18,"type":22,"attribute":5,"name":"Выступление"},{"id":13,"type":17,"attribute":5,"name":"Запугивание"},{"id":11,"type":15,"attribute":3,"name":"История"},{"id":20,"type":24,"attribute":1,"name":"Ловкость рук"},{"id":8,"type":12,"attribute":3,"name":"Магия"},{"id":15,"type":19,"attribute":4,"name":"Медицина"},{"id":10,"type":14,"attribute":5,"name":"Обман"},{"id":12,"type":16,"attribute":4,"name":"Проницательность"},{"id":16,"type":20,"attribute":3,"name":"Природа"},{"id":19,"type":23,"attribute":5,"name":"Убеждение"},{"id":7,"type":11,"attribute":4,"name":"Уход за животными"},{"id":22,"type":26,"attribute":1,"name":"Скрытность"},{"id":23,"type":27,"attribute":3,"name":"Религия"}]')},bf5b:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),c={class:"d-flex flex-column vh-100 position-relative"};function i(e,t,a,i,s,r){var o=Object(n["k"])("character");return Object(n["i"])(),Object(n["d"])("div",c,[Object(n["h"])(o)])}var s={class:"d-flex justify-content-center bg-primary p-2"},r={class:"col-12 col-lg-9 col-xl-7 px-0 mx-auto flex-grow-1"},o={key:1,class:"text-center row justify-content-center mx-0"},l={key:2,class:"text-center d-flex flex-column h-100"},d={key:3,class:"text-center d-flex flex-column h-100"},h={key:0,class:"position-fixed end-0 bottom-0 op-05"},u={class:"text-center small text-secondary py-1 border-top"};function b(e,t,a,c,i,b){var m=Object(n["k"])("header-message"),p=Object(n["k"])("main-info"),f=Object(n["k"])("attributes-list"),v=Object(n["k"])("inventory"),j=Object(n["k"])("slots-list"),O=Object(n["k"])("footer-menu");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])(m,{model:i.headerMessage},null,8,["model"]),Object(n["h"])("div",s,[(Object(n["i"])(),Object(n["d"])(n["a"],null,Object(n["j"])(5,(function(e){return Object(n["h"])("div",{key:e,class:"mx-3 btn "+(i.tab!=e?"btn-primary":"btn-light"),onClick:function(t){return i.tab=e}},[Object(n["h"])("i",{class:"fas fa-fw fa-"+i.icons[e-1]},null,2)],10,["onClick"])})),64))]),Object(n["h"])("div",r,[1==i.tab?(Object(n["i"])(),Object(n["d"])(p,{key:0,character:i.character,headerMessage:i.headerMessage},null,8,["character","headerMessage"])):Object(n["e"])("",!0),2==i.tab?(Object(n["i"])(),Object(n["d"])("div",o,[Object(n["h"])(f,{character:i.character},null,8,["character"])])):Object(n["e"])("",!0),3==i.tab?(Object(n["i"])(),Object(n["d"])("div",l,[Object(n["h"])(v,{character:i.character},null,8,["character"])])):Object(n["e"])("",!0),4==i.tab?(Object(n["i"])(),Object(n["d"])("div",d,[Object(n["h"])(j,{character:i.character},null,8,["character"])])):Object(n["e"])("",!0),5==i.tab?(Object(n["i"])(),Object(n["d"])(O,{key:4,character:i.character,saveService:i.saveService},null,8,["character","saveService"])):Object(n["e"])("",!0)]),i.character.settings.locked&&(i.tab<3||4==i.tab)?(Object(n["i"])(),Object(n["d"])("div",h,[Object(n["h"])("i",{class:"fas fa-lock fa-2x m-2",onClick:t[1]||(t[1]=function(e){return i.tab=5})})])):Object(n["e"])("",!0),Object(n["h"])("div",u,"D&D 5e лист персонажа "+Object(n["l"])(i.version)+" by AndrejevVE",1)],64)}var m,p=a("d4ec"),f=a("bee2");a("b0c0"),a("159b"),a("a434");(function(e){e[e["Unknown"]=-1]="Unknown",e[e["Strength"]=0]="Strength",e[e["Dexterity"]=1]="Dexterity",e[e["Constitution"]=2]="Constitution",e[e["Intelligence"]=3]="Intelligence",e[e["Wisdom"]=4]="Wisdom",e[e["Charisma"]=5]="Charisma"})(m||(m={}));a("4de4"),a("7db0");var v,j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(p["a"])(this,e),this.knowledge=0,this.id=t}return Object(f["a"])(e,[{key:"get",value:function(e,t){return t+e*this.knowledge}},{key:"inc",value:function(){this.knowledge=(this.knowledge+1)%3}},{key:"level",get:function(){switch(this.knowledge){case 0:return"far fa-circle";case 1:return"fas fa-dot-circle";case 2:return"fas fa-circle"}return""}},{key:"name",get:function(){var e,t,a=this;return null!==(e=null===(t=this.all.find((function(e){return e.id==a.id})))||void 0===t?void 0:t.name)&&void 0!==e?e:""}},{key:"type",get:function(){var e,t,a=this;return null!==(e=null===(t=this.all.find((function(e){return e.id==a.id})))||void 0===t?void 0:t.type)&&void 0!==e?e:0}},{key:"all",get:function(){return a("ba07")}}]),e}(),O=function(){function e(t){Object(p["a"])(this,e),this.value=10,this.checks=[],this.type=t}return Object(f["a"])(e,[{key:"bonus",get:function(){return Math.floor(this.value/2)-5}},{key:"getChecks",value:function(e){return this.checks.filter((function(t){return t.type===e}))}},{key:"skillChecks",get:function(){return this.checks.filter((function(e){return e.type>=10}))}},{key:"addCheck",value:function(e){this.checks.push(new j(e))}},{key:"name",get:function(){var e,t,a=this;return null!==(e=null===(t=this.all.find((function(e){return e.id==a.type})))||void 0===t?void 0:t.short)&&void 0!==e?e:""}},{key:"color",get:function(){var e,t,a=this;return null!==(e=null===(t=this.all.find((function(e){return e.id==a.type})))||void 0===t?void 0:t.color)&&void 0!==e?e:""}},{key:"all",get:function(){return a("a940")}}]),e}(),g=a("262e"),y=a("2caf"),k=a("9072"),x=function(e){Object(g["a"])(a,e);var t=Object(y["a"])(a);function a(e){var n;return Object(p["a"])(this,a),n=t.call(this),n.ctor=e,n}return Object(f["a"])(a,[{key:"pushNew",value:function(){this.push(new this.ctor)}}]),a}(Object(k["a"])(Array));(function(e){e[e["Unknown"]=0]="Unknown",e[e["Bard"]=1]="Bard",e[e["Barbarian"]=2]="Barbarian",e[e["Fighter"]=3]="Fighter",e[e["Wizard"]=4]="Wizard",e[e["Druid"]=5]="Druid",e[e["Cleric"]=6]="Cleric",e[e["Warlock"]=7]="Warlock",e[e["Monk"]=8]="Monk",e[e["Paladin"]=9]="Paladin",e[e["Rogue"]=10]="Rogue",e[e["Ranger"]=11]="Ranger",e[e["Sorcerer"]=12]="Sorcerer"})(v||(v={}));var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Unknown;Object(p["a"])(this,e),this.type=t}return Object(f["a"])(e,[{key:"name",get:function(){var e,t,a=this;return null!==(e=null===(t=this.all.find((function(e){return e.id==a.type})))||void 0===t?void 0:t.name)&&void 0!==e?e:""}},{key:"bone",get:function(){var e,t,a=this;return null!==(e=null===(t=this.all.find((function(e){return e.id==a.type})))||void 0===t?void 0:t.bone)&&void 0!==e?e:0}},{key:"all",get:function(){return a("b757")}}]),e}(),S=(a("13d5"),function(){function e(){Object(p["a"])(this,e),this.name="",this.count=1,this.weight=0,this.delete=!1}return Object(f["a"])(e,[{key:"toggleDeleteMode",value:function(e){this.delete=e}}]),e}()),D=function(){function e(){Object(p["a"])(this,e),this.name="",this.capacity=30,this.inner=new x(S),this.delete=!1}return Object(f["a"])(e,[{key:"weight",get:function(){var e=this.inner.reduce((function(e,t){return e+t.count*t.weight}),0);return Math.round(100*e)/100}},{key:"addItem",value:function(){this.inner.pushNew()}},{key:"toggleDeleteMode",value:function(e){this.delete=e,this.inner.forEach((function(t){return t.toggleDeleteMode(e)}))}},{key:"confirmDelete",value:function(){for(var e=0;e<this.inner.length;e++)this.inner[e].delete&&(this.inner.splice(e,1),e--)}}]),e}(),M=function(){function e(){Object(p["a"])(this,e),this.name="",this.components="",this.marked=!1,this.verbal=!1,this.material=!1,this.somatic=!1,this.ritual=!1,this.delete=!1}return Object(f["a"])(e,[{key:"toggleDeleteMode",value:function(e){this.delete=e}}]),e}(),C=function(){function e(){Object(p["a"])(this,e),this.name="",this.uses=0,this.limit=0,this.spells=new x(M)}return Object(f["a"])(e,[{key:"reset",value:function(){this.uses=this.limit}},{key:"addItem",value:function(){this.spells.pushNew()}},{key:"toggleDeleteMode",value:function(e){this.spells.forEach((function(t){return t.toggleDeleteMode(e)}))}},{key:"confirmDelete",value:function(){for(var e=0;e<this.spells.length;e++)this.spells[e].delete&&(this.spells.splice(e,1),e--)}}]),e}(),N=function e(){Object(p["a"])(this,e),this.locked=!1,this.autoSavesEnabled=!0,this.autoSavesInterval=6e5},I=function(){function e(){var t=this;Object(p["a"])(this,e),this.name="",this.race="",this.story="",this.level=1,this.size=2,this.alignment=4,this.speed=30,this.armor=10,this.initiative=0,this.masterInspiration=!1,this.bardInspiration=0,this.health=8,this.healthMax=8,this.healthBonus=0,this.healthBoneValue=8,this.healthBones=1,this.magicAttribute=m.Unknown,this.magicLimit=0,this.magicSlots=[],this.attributes=[],this.inventory=new x(D),this.class=new w,this.settings=new N;for(var a=0;a<6;a++)this.attributes.push(new O(a));for(var n=0;n<11;n++)this.magicSlots.push(new C);(new j).all.forEach((function(e){t.attributes[e.attribute].addCheck(e.id)}))}return Object(f["a"])(e,[{key:"proficiency",get:function(){return Math.floor((this.level-1)/4)+2}},{key:"addContainer",value:function(){this.inventory.pushNew()}},{key:"longRest",value:function(){this.health=this.healthMax,this.healthBones=this.level,this.magicSlots.forEach((function(e){return e.reset()}))}},{key:"clearInventory",value:function(){for(var e=0;e<this.inventory.length;e++)this.inventory[e].delete&&(this.inventory.splice(e,1),e--);this.inventory.forEach((function(e){return e.confirmDelete()}))}},{key:"clearSpells",value:function(){this.magicSlots.forEach((function(e){return e.confirmDelete()}))}},{key:"magicBonus",get:function(){return(this.magicAttribute<0?0:this.attributes[this.magicAttribute].bonus)+this.proficiency}},{key:"spellDifficulty",get:function(){return 8+this.magicBonus}}]),e}(),U=a("53ca"),V=(a("b64b"),a("8017")),B=a.n(V),A=function(){function e(){Object(p["a"])(this,e),this.dict=[],this.dict.push('{"knowledge":'),this.dict.push(',"id":'),this.dict.push(',"type":'),this.dict.push('{"value":'),this.dict.push(',"checks":['),this.dict.push(',"inventory":['),this.dict.push('{"name":'),this.dict.push(',"capacity":'),this.dict.push("health")}return Object(f["a"])(e,[{key:"compress",value:function(e){var t=JSON.stringify(e);return t?(this.dict.forEach((function(e,a){t=t.replaceAll(e,String.fromCharCode(a+1))})),t):""}},{key:"decompress",value:function(e){return this.dict.forEach((function(t,a){e=e.replaceAll(String.fromCharCode(a+1),t)})),JSON.parse(e)}},{key:"encode64",value:function(e){var t=this.compress(e),a=B.a.encodeUTF8(t),n=B.a.encodeBase64(a);return n}},{key:"encode256",value:function(e){var t=this.compress(e),a=B.a.encodeUTF8(t),n=B.a.encodeStorageBinaryString(a);return n}},{key:"decode64",value:function(e){var t=B.a.decodeBase64(e),a=B.a.decodeUTF8(t),n=this.decompress(a);return this.parse(n,new I)}},{key:"decode256",value:function(e){var t=B.a.decodeStorageBinaryString(e),a=B.a.decodeUTF8(t),n=this.decompress(a),c=this.parse(n,new I);return c}},{key:"parse",value:function(e,t){var a=this;if("object"!==Object(U["a"])(e)||null===e)return e;while(Array.isArray(e)&&t.length<e.length)t.pushNew();return Object.keys(e).forEach((function(n){"ctor"!=n&&(t[n]=a.parse(e[n],t[n]))})),t}}]),e}(),T=function(){function e(){Object(p["a"])(this,e),this.text="",this.icon="",this.color="",this.show=!1}return Object(f["a"])(e,[{key:"closeHeader",value:function(){this.show=!1}},{key:"showHeader",value:function(e){var t=this;this.text=e,this.show=!0,setTimeout((function(){return t.closeHeader()}),3e3)}},{key:"showError",value:function(e){this.showHeader(e),this.icon="fas fa-exclamation-triangle",this.color="bg-danger"}},{key:"showSuccess",value:function(e){this.showHeader(e),this.icon="fas fa-thumbs-up",this.color="bg-success"}}]),e}(),E={class:"text-center bg-white py-2"},P={class:"my-3"},L=Object(n["g"])(" Редактирование персонажа "),H={class:"btn btn-warning"},R={class:"btn border-warning col-6"},_=Object(n["h"])("div",{class:"btn btn-warning"},[Object(n["h"])("i",{class:"fa-fw fas"}," ")],-1),z={class:"my-3"},F={class:"btn btn-info"},J={class:"btn border-info col-6"},W=Object(n["h"])("div",{class:"btn btn-info"},[Object(n["h"])("i",{class:"fa-fw fas"}," ")],-1),$=Object(n["f"])('<div class="my-5"></div><div class="btn-group d-block my-3" data-bs-toggle="modal" data-bs-target="#saveModal"><div class="btn btn-success"><i class="fas fa-fw fa-save"></i></div><div class="btn border-success col-6"> Сохранения </div><div class="btn btn-success"><i class="fa-fw fas"> </i></div></div><div class="btn-group d-block my-3" data-bs-toggle="modal" data-bs-target="#reloadModal"><div class="btn btn-danger"><i class="fas fa-fw fa-redo"></i></div><div class="btn border-danger col-6"> Загрузка </div><div class="btn btn-danger"><i class="fa-fw fas"> </i></div></div><div class="btn-group d-block my-3" data-bs-toggle="modal" data-bs-target="#importModal"><div class="btn btn-info"><i class="fas fa-fw fa-download"></i></div><div class="btn border-info col-6"> Импорт строки </div><div class="btn btn-info"><i class="fa-fw fas"> </i></div></div><div class="btn-group d-block my-3" data-bs-toggle="modal" data-bs-target="#exportModal"><div class="btn btn-info"><i class="fas fa-fw fa-upload"></i></div><div class="btn border-info col-6"> Экспорт строки </div><div class="btn btn-info"><i class="fa-fw fas"> </i></div></div>',5);function q(e,t,a,c,i,s){var r=Object(n["k"])("export-modal"),o=Object(n["k"])("save-modal"),l=Object(n["k"])("import-modal"),d=Object(n["k"])("reload-modal");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",E,[Object(n["h"])("div",P,[L,Object(n["h"])("div",{class:"btn-group d-block",onClick:t[1]||(t[1]=function(){return s.lock&&s.lock.apply(s,arguments)})},[Object(n["h"])("div",H,[Object(n["h"])("i",{class:"fas fa-fw "+(a.character.settings.locked?"fa-unlock":"fa-lock")},null,2)]),Object(n["h"])("div",R,Object(n["l"])(a.character.settings.locked?"Разблокировать":"Заблокировать"),1),_])]),Object(n["h"])("div",z,[Object(n["g"])(" Автосохранения (каждые "+Object(n["l"])(a.character.settings.autoSavesInterval/6e4)+" минут) ",1),Object(n["h"])("div",{class:"btn-group d-block",onClick:t[2]||(t[2]=function(){return s.toggleAutoSave&&s.toggleAutoSave.apply(s,arguments)})},[Object(n["h"])("div",F,[Object(n["h"])("i",{class:"fas fa-fw "+(a.character.settings.autoSavesEnabled?"fa-stop-circle":"fa-play-circle")},null,2)]),Object(n["h"])("div",J,Object(n["l"])(a.character.settings.autoSavesEnabled?"Отключить":"Включить"),1),W])]),$]),Object(n["h"])(r,{character:a.character},null,8,["character"]),Object(n["h"])(o,{character:a.character,saveService:a.saveService},null,8,["character","saveService"]),Object(n["h"])(l),Object(n["h"])(d,{saveService:a.saveService},null,8,["saveService"])],64)}var G={class:"modal fade",id:"exportModal"},K={class:"modal-dialog"},Q={class:"modal-content"},X=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title"},"Экспортировать персонажа"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),Y={class:"modal-body"},Z={class:"modal-footer"},ee=Object(n["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Закрыть ",-1);function te(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",G,[Object(n["h"])("div",K,[Object(n["h"])("div",Q,[X,Object(n["h"])("div",Y,[Object(n["h"])("textarea",{value:s.exportStr(),class:"form-control",readonly:"",rows:"10"},null,8,["value"])]),Object(n["h"])("div",Z,[Object(n["h"])("button",{type:"button",class:"btn btn-info",onClick:t[1]||(t[1]=function(){return s.copy&&s.copy.apply(s,arguments)})}," Скопировать "),ee])])])])}var ae={name:"export-modal",props:{character:I},methods:{exportStr:function(){return this.encoder.encode64(this.character)},copy:function(){var e=this,t=this.exportStr();document.addEventListener("copy",(function(a){a.clipboardData.setData("text/plain",t),a.preventDefault(),document.removeEventListener("copy",e.event)})),document.execCommand("copy")}},created:function(){this.encoder=new A}};ae.render=te;var ne=ae,ce={class:"modal fade",id:"importModal"},ie={class:"modal-dialog"},se={class:"modal-content"},re=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title"},"Загрузить сохранение"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),oe={class:"modal-body"},le={class:"modal-footer"},de=Object(n["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Закрыть ",-1);function he(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",ce,[Object(n["h"])("div",ie,[Object(n["h"])("div",se,[re,Object(n["h"])("div",oe,[Object(n["p"])(Object(n["h"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.importData=e}),class:"form-control",rows:"10"},null,512),[[n["n"],i.importData]])]),Object(n["h"])("div",le,[Object(n["h"])("button",{type:"button",class:"btn btn-info",onClick:t[2]||(t[2]=function(){return s.importStr&&s.importStr.apply(s,arguments)}),"data-bs-dismiss":"modal"}," Загрузить "),de])])])])}var ue={name:"import-modal",props:{character:I},data:function(){return{importData:""}},methods:{importStr:function(){return this.$parent.importCharacter(this.importData,64)}}};ue.render=he;var be=ue,me={class:"modal fade",id:"reloadModal"},pe={class:"modal-dialog"},fe={class:"modal-content"},ve=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title"},"Загрузить персонажа"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),je={class:"modal-body py-0"},Oe={class:"my-3 d-flex rounded position-relative"},ge=Object(n["h"])("div",{class:"mt-3 text-center"},"Автосохранение",-1),ye={class:"my-3 d-flex rounded position-relative"},ke=Object(n["h"])("div",{class:"mt-3 text-center"},"Слоты сохранений",-1),xe={class:"modal-footer"},we=Object(n["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Закрыть ",-1);function Se(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",me,[Object(n["h"])("div",pe,[Object(n["h"])("div",fe,[ve,Object(n["h"])("div",je,[Object(n["h"])("div",Oe,[Object(n["h"])("div",{class:"rounded border p-1 text-center w-100 "+(10==i.selected?"bg-dark text-white":""),onClick:t[1]||(t[1]=function(e){return i.selected=10==i.selected?-1:10})}," Новый персонаж ",2)]),ge,Object(n["h"])("div",ye,[Object(n["h"])("div",{class:"rounded border p-1 flex-grow-1 "+(0==i.selected?"bg-dark text-white":""),onClick:t[2]||(t[2]=function(e){return i.selected=0==i.selected?-1:0})},Object(n["l"])(s.savedName(0)),3)]),ke,(Object(n["i"])(),Object(n["d"])(n["a"],null,Object(n["j"])(3,(function(e){return Object(n["h"])("div",{key:e,class:"my-3 d-flex rounded position-relative"},[Object(n["h"])("div",{class:"rounded border p-1 flex-grow-1 "+(e==i.selected?"bg-dark text-white":""),onClick:function(t){return i.selected=i.selected==e?-1:e}},Object(n["l"])(e)+" - "+Object(n["l"])(s.savedName(e)),11,["onClick"])])})),64))]),Object(n["h"])("div",xe,[i.selected>=0?(Object(n["i"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[3]||(t[3]=function(){return s.load&&s.load.apply(s,arguments)})}," Загрузить ")):Object(n["e"])("",!0),we])])])])}a("a9e3");var De=function(){function e(t){switch(Object(p["a"])(this,e),t){case 1:return this.value=localStorage.save1,this.name=localStorage.save1Name,void(this.datetime=localStorage.save1Date);case 2:return this.value=localStorage.save2,this.name=localStorage.save2Name,void(this.datetime=localStorage.save2Date);case 3:return this.value=localStorage.save3,this.name=localStorage.save3Name,void(this.datetime=localStorage.save3Date);default:return this.value=localStorage.autoSave,this.name=localStorage.autoSaveName,void(this.datetime=localStorage.autoSaveDate)}}return Object(f["a"])(e,[{key:"setData",value:function(e,t,a){switch(this.value=e,this.name=t,this.datetime=new Date,a){case 1:return localStorage.save1=this.value,localStorage.save1Name=this.name,void(localStorage.save1Date=this.datetime);case 2:return localStorage.save2=this.value,localStorage.save2Name=this.name,void(localStorage.save2Date=this.datetime);case 3:return localStorage.save3=this.value,localStorage.save3Name=this.name,void(localStorage.save3Date=this.datetime);default:return localStorage.autoSave=this.value,localStorage.autoSaveName=this.name,void(localStorage.autoSaveDate=this.datetime)}}}]),e}(),Me=function(){function e(){Object(p["a"])(this,e),this.encoder=new A,this.saveSlots=[];for(var t=0;t<4;t++)this.saveSlots.push(new De(t))}return Object(f["a"])(e,[{key:"importCharacter",value:function(e,t,a){if(0==t||!this.isValid(e))return new I;try{var n=64==t?this.encoder.decode64(e):this.encoder.decode256(e);return n}catch(c){return a.showError("Ошибка загрузки"),new I}}},{key:"hasSave",value:function(e){return this.isValid(this.getSave(e).value)}},{key:"getSave",value:function(e){return this.saveSlots[e]}},{key:"isValid",value:function(e){return!!e&&"null"!==e}},{key:"applySave",value:function(e,t){var a=this.encoder.encode256(e);0===e.name.length&&(e.name="Неизвестный"),this.saveSlots[t].setData(a,e.name,t)}},{key:"deleteSave",value:function(e){this.saveSlots[e].setData("","",e)}},{key:"savedName",value:function(e){if(!this.hasSave(e))return"Свободный слот";var t=this.getSave(e);return t.name+" - "+this.dateFormat(t.datetime)}},{key:"dateFormat",value:function(e){if(!e)return"";var t=new Date(e);return this.formatTwoDigits(t.getDate())+"."+this.formatTwoDigits(1+t.getMonth())+" "+this.formatTwoDigits(t.getHours())+":"+this.formatTwoDigits(t.getMinutes())}},{key:"formatTwoDigits",value:function(e){return e>9?e:"0"+e}}]),e}(),Ce={name:"reload-modal",props:{saveService:Me},data:function(){return{importData:"",selected:Number}},methods:{hasSave:function(e){return this.saveService.hasSave(e)},load:function(){if(10==this.selected)return this.clearSave();var e=this.saveService.getSave(this.selected).value;this.$parent.importCharacter(e,256)},clearSave:function(){this.$parent.importCharacter(null,0)},savedName:function(e){return this.saveService.savedName(e)}},created:function(){this.selected=-1}};Ce.render=Se;var Ne=Ce,Ie={class:"modal fade",id:"saveModal"},Ue={class:"modal-dialog"},Ve={class:"modal-content"},Be=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title"},"Сохранить персонажа"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),Ae={class:"modal-body py-0"},Te=Object(n["h"])("div",{class:"mt-3 text-center"},"Автосохранение",-1),Ee={class:"my-3 d-flex rounded position-relative"},Pe=Object(n["h"])("div",{class:"mt-3 text-center"},"Слоты сохранений",-1),Le=Object(n["h"])("i",{class:"fas fa-times"},null,-1),He={class:"modal-footer"},Re=Object(n["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Закрыть ",-1);function _e(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",Ie,[Object(n["h"])("div",Ue,[Object(n["h"])("div",Ve,[Be,Object(n["h"])("div",Ae,[Te,Object(n["h"])("div",Ee,[Object(n["h"])("div",{class:"rounded border p-1 flex-grow-1 "+(0==i.selected?"bg-dark text-white":""),onClick:t[1]||(t[1]=function(e){return i.selected=0==i.selected?-1:0})},Object(n["l"])(s.savedName(0)),3)]),Pe,(Object(n["i"])(),Object(n["d"])(n["a"],null,Object(n["j"])(3,(function(e){return Object(n["h"])("div",{key:e,class:"my-3 d-flex rounded position-relative"},[Object(n["h"])("div",{class:"rounded border p-1 flex-grow-1 "+(e==i.selected?"bg-dark text-white":""),onClick:function(t){return i.selected=i.selected==e?-1:e}},Object(n["l"])(e)+" - "+Object(n["l"])(s.savedName(e)),11,["onClick"]),s.hasSave(e)?(Object(n["i"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-danger position-absolute end-0 bottom-0 top-0 border-dark",onClick:function(t){return s.deleteSave(e)}},[Le],8,["onClick"])):Object(n["e"])("",!0)])})),64))]),Object(n["h"])("div",He,[i.selected>=0?(Object(n["i"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=function(){return s.save&&s.save.apply(s,arguments)})}," Сохранить ")):Object(n["e"])("",!0),Re])])])])}var ze={name:"save-modal",props:{character:I,saveService:Me},data:function(){return{selected:Number}},methods:{hasSave:function(e){return this.saveService.hasSave(e)},save:function(){this.saveService.applySave(this.character,this.selected),this.selected=-1},deleteSave:function(e){this.saveService.deleteSave(e),this.selected=-1},savedName:function(e){return this.saveService.savedName(e)}},created:function(){this.selected=-1}};ze.render=_e;var Fe=ze,Je={name:"footer-menu",props:{character:I,saveService:Me},methods:{lock:function(){Object.assign(this.character.settings,{locked:!this.character.settings.locked})},toggleAutoSave:function(){Object.assign(this.character.settings,{autoSavesEnabled:!this.character.settings.autoSavesEnabled})},importCharacter:function(e,t){return this.$parent.importCharacter(e,t)}},components:{exportModal:ne,importModal:be,reloadModal:Ne,saveModal:Fe}};Je.render=q;var We=Je,$e={class:"position-fixed top-0 start-0 w-100 p-2 text-center message"},qe={class:"d-flex justify-content-center"},Ge={class:"toast-body text-center"};function Ke(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",$e,[Object(n["h"])(n["b"],{name:"fade"},{default:Object(n["o"])((function(){return[a.model.show?(Object(n["i"])(),Object(n["d"])("div",{key:0,class:"text-white rounded "+a.model.color},[Object(n["h"])("div",qe,[Object(n["h"])("i",{class:"m-auto ms-3 "+a.model.icon},null,2),Object(n["h"])("div",Ge,Object(n["l"])(a.model.text),1),Object(n["h"])("button",{type:"button",class:"btn-close m-auto me-2 btn-close-white",onClick:t[1]||(t[1]=function(){return s.close&&s.close.apply(s,arguments)})})])],2)):Object(n["e"])("",!0)]})),_:1})])}var Qe={name:"header-message",props:{model:T},methods:{close:function(){this.model.closeHeader()}},watch:{model:function(){this.getData()}}};Qe.render=Ke;var Xe=Qe,Ye={class:"flex-grow-1"},Ze={class:"row justify-content-center mx-0"},et={key:0},tt=Object(n["h"])("i",{class:"fas fa-plus-circle me-2"},null,-1),at=Object(n["g"])(" Добавить "),nt=Object(n["h"])("i",{class:"fas fa-trash me-2"},null,-1),ct=Object(n["g"])(" Удалить "),it={key:1},st=Object(n["h"])("i",{class:"fas fa-trash me-2"},null,-1),rt=Object(n["g"])(" Удалить "),ot=Object(n["h"])("i",{class:"fas fa-times me-2"},null,-1),lt=Object(n["g"])(" Отмена ");function dt(e,t,a,c,i,s){var r=this,o=Object(n["k"])("container");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",Ye,[Object(n["h"])("div",Ze,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.character.inventory,(function(e,t){return Object(n["i"])(),Object(n["d"])("div",{class:"col-12 col-md-6 my-2",key:t},[Object(n["h"])(o,{container:e,index:t,deleteMode:i.deleteMode},null,8,["container","index","deleteMode"])])})),128))])]),i.deleteMode?Object(n["e"])("",!0):(Object(n["i"])(),Object(n["d"])("div",et,[Object(n["h"])("button",{class:"btn btn-success m-2",onClick:t[1]||(t[1]=function(){return s.addContainer&&s.addContainer.apply(s,arguments)})},[tt,at]),Object(n["h"])("button",{class:"btn btn-danger m-2 pe-3",onClick:t[2]||(t[2]=function(){return s.openDeleteMode&&s.openDeleteMode.apply(s,arguments)}),disabled:!a.character.inventory.length},[nt,ct],8,["disabled"])])),i.deleteMode?(Object(n["i"])(),Object(n["d"])("div",it,[Object(n["h"])("button",{class:"btn btn-danger m-2 pe-3",onClick:t[3]||(t[3]=function(){return s.confirmDelete&&s.confirmDelete.apply(s,arguments)})},[st,rt]),Object(n["h"])("button",{class:"btn btn-secondary m-2 pe-3",onClick:t[4]||(t[4]=function(e){return r.deleteMode=!1})},[ot,lt])])):Object(n["e"])("",!0)],64)}var ht={class:"card border"},ut={class:"card-header border-bottom d-flex justify-content-between px-1 bg-primary text-white"},bt=Object(n["h"])("i",{class:"fas fa-eye text-white pt-1 my-1 px-3"},null,-1),mt={class:"flex-grow-1"},pt={key:0,class:"d-flex"},ft=Object(n["h"])("span",{class:"py-1"},"/",-1),vt={key:1,class:"block light m-1"},jt={key:0,class:"fas fa-times"},Ot={class:"text-start mt-2"},gt=Object(n["h"])("i",{class:"fas fa-plus-circle"},null,-1);function yt(e,t,a,c,i,s){var r=Object(n["k"])("item");return Object(n["i"])(),Object(n["d"])("div",ht,[Object(n["h"])("div",ut,[Object(n["h"])("div",{"data-bs-toggle":"collapse","data-bs-target":".collapse_"+a.index},[bt],8,["data-bs-target"]),Object(n["h"])("div",mt,[Object(n["p"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.name=e}),onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)}),class:"border-0 border-bottom border-white px-1 w-100 h-100 text-white bg-primary"},null,544),[[n["n"],i.name]])]),a.deleteMode?Object(n["e"])("",!0):(Object(n["i"])(),Object(n["d"])("div",pt,[Object(n["h"])("span",{class:"w-50px py-1 "+(a.container.weight>i.capacity?"text-danger":"")},Object(n["l"])(a.container.weight),3),ft,Object(n["p"])(Object(n["h"])("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.capacity=e}),onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)}),class:"plain w-50px text-white",min:"0"},null,544),[[n["n"],i.capacity]])])),a.deleteMode?(Object(n["i"])(),Object(n["d"])("div",vt,[Object(n["h"])("div",{onClick:t[5]||(t[5]=function(){return s.toggleDelete&&s.toggleDelete.apply(s,arguments)}),class:"w-100 h-100"},[a.container.delete?(Object(n["i"])(),Object(n["d"])("i",jt)):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)]),Object(n["h"])("div",{class:"card-body p-1 collapse show collapse_"+a.index},[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.container.inner,(function(e,t){return Object(n["i"])(),Object(n["d"])("div",{key:t},[Object(n["h"])(r,{item:e,index:t,container:a.container,deleteMode:a.deleteMode},null,8,["item","index","container","deleteMode"])])})),128)),Object(n["h"])("div",Ot,[Object(n["h"])("button",{class:"btn btn-success p-1 btn-sm lh-0",onClick:t[6]||(t[6]=function(){return s.addItem&&s.addItem.apply(s,arguments)})},[gt])])],2)])}var kt={class:"d-flex my-1"},xt={class:"hex light mt-1 mx-1"},wt={class:"block light mt-1 mx-1"},St={key:0,class:"fas fa-times"};function Dt(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",kt,[Object(n["h"])("div",xt,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.count=e}),class:"plain w-100",type:"number",min:"0",max:"999",onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,544),[[n["n"],i.count]])]),Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.name=e}),class:"border-0 px-1 border-bottom flex-grow-1",onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)}),placeholder:"Предмет"},null,544),[[n["n"],i.name]]),Object(n["h"])("div",wt,[a.deleteMode?Object(n["e"])("",!0):Object(n["p"])((Object(n["i"])(),Object(n["d"])("input",{key:0,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.weight=e}),class:"plain w-100",type:"number",min:"0",max:"999",onChange:t[6]||(t[6]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,544)),[[n["n"],i.weight]]),a.deleteMode?(Object(n["i"])(),Object(n["d"])("div",{key:1,onClick:t[7]||(t[7]=function(){return s.toggleDelete&&s.toggleDelete.apply(s,arguments)}),class:"w-100 h-100"},[a.item.delete||a.container.delete?(Object(n["i"])(),Object(n["d"])("i",St)):Object(n["e"])("",!0)])):Object(n["e"])("",!0)])])}var Mt={name:"container",props:{item:S,container:D,index:Number,deleteMode:Boolean},data:function(){return{name:String,count:Number,weight:Number,delete:Boolean}},methods:{getData:function(){this.name=this.item.name,this.count=this.item.count,this.weight=this.item.weight,this.delete=this.item.delete},setData:function(){Object.assign(this.item,{name:this.name}),Object.assign(this.item,{count:this.count}),Object.assign(this.item,{weight:this.weight}),Object.assign(this.item,{delete:this.delete})},toggleDelete:function(){this.delete=!this.delete,this.setData()}},watch:{item:{handler:function(){this.getData()},deep:!0,immediate:!0}},components:{}};Mt.render=Dt;var Ct=Mt,Nt={name:"container",props:{container:D,index:Number,deleteMode:Boolean},data:function(){return{name:String,capacity:Number,delete:Boolean}},methods:{getData:function(){this.name=this.container.name,this.capacity=this.container.capacity,this.delete=this.container.delete},setData:function(){Object.assign(this.container,{name:this.name}),Object.assign(this.container,{capacity:this.capacity}),Object.assign(this.container,{delete:this.delete})},addItem:function(){this.container.addItem()},toggleDelete:function(){this.delete=!this.delete,this.container.toggleDeleteMode(!0),this.setData()}},watch:{container:{handler:function(){this.getData()},deep:!0,immediate:!0}},components:{item:Ct}};Nt.render=yt;var It=Nt,Ut={name:"inventory",props:{character:I},data:function(){return{deleteMode:!1}},methods:{addContainer:function(){this.character.addContainer()},openDeleteMode:function(){this.deleteMode=!0,this.character.inventory.forEach((function(e){return e.toggleDeleteMode(!1)}))},confirmDelete:function(){this.deleteMode=!1,this.character.clearInventory()}},components:{container:It}};Ut.render=dt;var Vt,Bt=Ut,At={class:"col-3"},Tt={class:"col-9 px-0 d-flex flex-column justify-content-center"},Et={class:"m-1 border"};function Pt(e,t,a,c,i,s){var r=Object(n["k"])("attribute"),o=Object(n["k"])("check");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",At,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.character.attributes,(function(e,t){return Object(n["i"])(),Object(n["d"])("div",{key:e.name},[Object(n["h"])(r,{character:a.character,attribute:e,index:t},null,8,["character","attribute","index"])])})),128))]),Object(n["h"])("div",Tt,[Object(n["h"])("div",Et,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.character.attributes,(function(e,t){return Object(n["i"])(),Object(n["d"])("div",{class:"text-start position-relative "+(t>0?"border-top":""),key:e.name},[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(e.checks,(function(t){return Object(n["i"])(),Object(n["d"])("div",{class:"p-small",key:t.name,style:t.type==i.checkType.Saving?"background-color: #"+e.color:""},[Object(n["h"])(o,{check:t,proficiency:a.character.proficiency,bonus:e.bonus,locked:a.character.settings.locked},null,8,["check","proficiency","bonus","locked"])],4)})),128))],2)})),128))])])],64)}(function(e){e[e["Saving"]=0]="Saving",e[e["Acrobatics"]=10]="Acrobatics",e[e["AnimalHandling"]=11]="AnimalHandling",e[e["Arcana"]=12]="Arcana",e[e["Athletics"]=13]="Athletics",e[e["Deception"]=14]="Deception",e[e["History"]=15]="History",e[e["Insight"]=16]="Insight",e[e["Intimidation"]=17]="Intimidation",e[e["Investigation"]=18]="Investigation",e[e["Medicine"]=19]="Medicine",e[e["Nature"]=20]="Nature",e[e["Perception"]=21]="Perception",e[e["Performance"]=22]="Performance",e[e["Persuasion"]=23]="Persuasion",e[e["Religion"]=24]="Religion",e[e["SleightOfHand"]=25]="SleightOfHand",e[e["Stealth"]=26]="Stealth",e[e["Survival"]=27]="Survival"})(Vt||(Vt={}));var Lt={class:"d-flex"},Ht={class:"my-2 mx-auto"},Rt={class:"hex gray"},_t=Object(n["h"])("div",null,null,-1),zt={class:"m-0"};function Ft(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",Lt,[Object(n["h"])("div",Ht,[Object(n["h"])("div",Rt,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.attributeValue=e}),class:"plain w-100",type:"number",min:"1",max:"20",disabled:a.character.settings.locked,onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.attributeValue]])]),Object(n["h"])("div",{class:"border pt-3 pb-1 rounded-4 d-flex flex-column mt-n3 attribute",style:"background-color: #"+a.attribute.color},[_t,Object(n["h"])("h1",zt,Object(n["l"])(a.attribute.bonus),1),Object(n["g"])(" "+Object(n["l"])(a.attribute.name),1)],4)])])}var Jt={name:"attribute-with-checks",props:{character:I,attribute:O,index:Number},data:function(){return{attributeValue:0}},methods:{setData:function(){Object.assign(this.attribute,{value:this.attributeValue})},getData:function(){this.attributeValue=this.attribute.value}},watch:{character:function(){this.getData()}},created:function(){this.getData()}};Jt.render=Ft;var Wt=Jt,$t={class:"bonus px-2"},qt={key:0,class:"fw-bold small"};function Gt(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",{class:"check px-2 d-inline",onClick:t[1]||(t[1]=function(e){return!a.locked&&a.clickable?a.check.inc():""})},[Object(n["h"])("div",{class:a.color+" "+a.check.level},null,2),Object(n["h"])("span",$t,Object(n["l"])(a.check.get(a.proficiency,a.bonus)),1),Object(n["h"])("span",null,[Object(n["g"])(Object(n["l"])(a.check.name)+" ",1),a.check.type==e.checkType.Perception?(Object(n["i"])(),Object(n["d"])("span",qt," ("+Object(n["l"])(10+a.check.get(a.proficiency,a.bonus))+")",1)):Object(n["e"])("",!0)])])}var Kt={name:"check",props:{check:j,color:String,proficiency:{type:Number,default:0},bonus:Number,clickable:{type:Boolean,default:!0,checkType:{default:Vt}},locked:Boolean},created:function(){this.checkType=Vt}};Kt.render=Gt;var Qt=Kt,Xt={name:"attributes-list",props:{character:I,locked:Boolean},data:function(){return{bones:0,attributeType:{default:m},checkType:{default:Vt}}},methods:{setData:function(){Object.assign(this.character,{healthBones:this.bones})},getData:function(){this.bones=this.character.healthBones}},watch:{character:function(){this.getData()}},created:function(){this.attributeType=m,this.checkType=Vt,this.getData()},components:{attribute:Wt,check:Qt}};Xt.render=Pt;var Yt=Xt,Zt={class:"text-center row mx-1 justify-content-center mt-2"},ea={class:"px-1 col-12 col-md-6 col-lg-5"},ta={class:"alert alert-secondary mb-2"},aa={class:"px-1 col-4 col-md-3"},na={class:"alert alert-warning mb-2"},ca=Object(n["h"])("div",{class:"small text-secondary"},"Класс",-1),ia={class:"px-1 col-4 col-md-3"},sa={class:"alert alert-warning mb-2"},ra=Object(n["h"])("div",{class:"small text-secondary"},"Раса",-1),oa={class:"px-1 col-4 col-md-3"},la={class:"alert alert-warning mb-2"},da=Object(n["h"])("div",{class:"small text-secondary"},"Предыстория",-1),ha={class:"px-1 col-3 col-md-3 col-lg-2"},ua={class:"alert alert-warning mb-2"},ba=Object(n["h"])("div",{class:"small text-secondary"},"Уровень",-1),ma={class:"px-1 col-4 col-md-3"},pa={class:"alert alert-warning mb-2"},fa=Object(n["f"])('<option value="0">Крошечный</option><option value="1">Маленький</option><option value="2">Средний</option><option value="3">Большой</option><option value="4">Огромный</option>',5),va=Object(n["h"])("div",{class:"small text-secondary"},"Размер",-1),ja={class:"px-1 col-5 col-md-3"},Oa={class:"alert alert-warning mb-2"},ga=Object(n["f"])('<option value="0">Законно-добрый</option><option value="1">Законный</option><option value="2">Законно-злой</option><option value="3">Добрый</option><option value="4">Нейтральный</option><option value="5">Злой</option><option value="6">Хаотично-добрый</option><option value="7">Хаотичный</option><option value="8">Хаотично-злой</option>',9),ya=Object(n["h"])("div",{class:"small text-secondary"},"Мировоззрение",-1),ka={class:"col-6 px-1"},xa={class:"my-3"},wa=Object(n["g"])(" Вдохновение "),Sa={class:"d-flex px-1 justify-content-center"},Da={class:"mx-2"},Ma={key:0,class:"fas fa-check"},Ca=Object(n["g"])(" Мастера "),Na=Object(n["f"])('<div class="px-2 mx-2"><select class="block plain d-block" style="--color:250deg;"><option value="0"></option><option value="6">d6</option><option value="8">d8</option><option value="10">d10</option><option value="12">d12</option></select> Барда </div>',1),Ia={class:"text-start mx-auto d-inline-block"},Ua={class:"d-inline-flex p-1"},Va={class:"hex me-2 text-center",style:{"--color":"300deg"}},Ba=Object(n["g"])(" Мастерство "),Aa=Object(n["h"])("br",null,null,-1),Ta={class:"px-1 col-6 d-flex flex-column justify-content-between"},Ea={class:"col-6 my-3"};function Pa(e,t,a,c,i,s){var r=Object(n["k"])("derivatives"),o=Object(n["k"])("health"),l=Object(n["k"])("health-bones"),d=Object(n["k"])("rest");return Object(n["i"])(),Object(n["d"])("div",Zt,[Object(n["h"])("div",ea,[Object(n["h"])("div",ta,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.name=e}),class:"plain w-100 border-bottom py-2 h5 mb-1",placeholder:"Имя персонажа",disabled:i.locked,onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.name]])])]),Object(n["h"])("div",aa,[Object(n["h"])("div",na,[this.character.class?Object(n["p"])((Object(n["i"])(),Object(n["d"])("select",{key:0,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.characterClass=e}),class:"plain w-100 border-bottom",disabled:i.locked,onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)})},[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(s.classOptions(),(function(e){return Object(n["i"])(),Object(n["d"])("option",{key:e,value:e.id},Object(n["l"])(e.name),9,["value"])})),128))],40,["disabled"])),[[n["m"],i.characterClass]]):Object(n["e"])("",!0),ca])]),Object(n["h"])("div",ia,[Object(n["h"])("div",sa,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.race=e}),class:"plain w-100 border-bottom",disabled:i.locked,onChange:t[6]||(t[6]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.race]]),ra])]),Object(n["h"])("div",oa,[Object(n["h"])("div",la,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.story=e}),class:"plain w-100 border-bottom",disabled:i.locked,onChange:t[8]||(t[8]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.story]]),da])]),Object(n["h"])("div",ha,[Object(n["h"])("div",ua,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.level=e}),class:"plain w-100 border-bottom",type:"number",min:"1",max:"20",disabled:i.locked,onChange:t[10]||(t[10]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.level]]),ba])]),Object(n["h"])("div",ma,[Object(n["h"])("div",pa,[Object(n["p"])(Object(n["h"])("select",{"onUpdate:modelValue":t[11]||(t[11]=function(e){return i.size=e}),class:"plain w-100 border-bottom",disabled:i.locked,onChange:t[12]||(t[12]=function(){return s.setData&&s.setData.apply(s,arguments)})},[fa],40,["disabled"]),[[n["m"],i.size]]),va])]),Object(n["h"])("div",ja,[Object(n["h"])("div",Oa,[Object(n["p"])(Object(n["h"])("select",{"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.alignment=e}),class:"plain w-100 border-bottom",disabled:i.locked,onChange:t[14]||(t[14]=function(){return s.setData&&s.setData.apply(s,arguments)})},[ga],40,["disabled"]),[[n["m"],i.alignment]]),ya])]),Object(n["h"])("div",ka,[Object(n["h"])("div",xa,[wa,Object(n["h"])("div",Sa,[Object(n["h"])("div",Da,[Object(n["h"])("div",{class:"hex m-auto d-block",style:{"--color":"250deg"},onClick:t[15]||(t[15]=function(){return s.toggleInspiration&&s.toggleInspiration.apply(s,arguments)})},[i.masterInspiration?(Object(n["i"])(),Object(n["d"])("span",Ma)):Object(n["e"])("",!0)]),Ca]),Na])]),Object(n["h"])("div",Ia,[Object(n["h"])("div",Ua,[Object(n["h"])("div",Va,Object(n["l"])(a.character.proficiency),1),Ba]),Aa,Object(n["h"])(r,{character:a.character},null,8,["character"])])]),Object(n["h"])("div",Ta,[Object(n["h"])(o,{character:a.character},null,8,["character"]),Object(n["h"])(l,{character:a.character},null,8,["character"])]),Object(n["h"])("div",Ea,[Object(n["h"])(d,{headerMessage:a.headerMessage,character:a.character},null,8,["headerMessage","character"])])])}var La={class:"d-inline-flex p-1"},Ha={class:"hex me-2",style:{"--color":"110deg"}},Ra=Object(n["g"])(" Скорость "),_a=Object(n["h"])("br",null,null,-1),za={class:"d-inline-flex p-1"},Fa={class:"hex me-2",style:{"--color":"160deg"}},Ja=Object(n["g"])(" Инициатива "),Wa=Object(n["h"])("br",null,null,-1),$a={class:"d-inline-flex p-1"},qa={class:"hex me-2",style:{"--color":"40deg"}},Ga=Object(n["g"])(" Класс брони ");function Ka(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",La,[Object(n["h"])("div",Ha,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.speed=e}),class:"plain w-100",type:"number",min:"0",disabled:a.character.settings.locked,onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.speed]])]),Ra]),_a,Object(n["h"])("div",za,[Object(n["h"])("div",Fa,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.initiative=e}),class:"plain w-100",type:"number",disabled:a.character.settings.locked,onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.initiative]])]),Ja]),Wa,Object(n["h"])("div",$a,[Object(n["h"])("div",qa,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.armor=e}),class:"plain w-100",type:"number",disabled:a.character.settings.locked,onChange:t[6]||(t[6]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.armor]])]),Ga])],64)}var Qa={name:"derivatives",props:{character:I},data:function(){return{speed:0,armor:0,initiative:0}},methods:{setData:function(){Object.assign(this.character,{armor:this.armor}),Object.assign(this.character,{speed:this.speed}),Object.assign(this.character,{initiative:this.initiative})},getData:function(){this.armor=this.character.armor,this.speed=this.character.speed,this.initiative=this.character.initiative}},watch:{character:{handler:function(){this.getData()},deep:!0,immediate:!0}}};Qa.render=Ka;var Xa=Qa,Ya={class:"heart p-3 pb-4 small mt-1"},Za={class:"d-flex justify-content-center mt-2"},en={class:"hex big",style:{"--color":"-10deg"}},tn=Object(n["h"])("span",{class:"mx-1 my-0 h3"},"/",-1),an={class:"hex big",style:{"--color":"-10deg"}},nn=Object(n["h"])("div",{class:"mb-1"},"Здоровье",-1),cn={class:"hex",style:{"--color":"-10deg"}},sn=Object(n["h"])("div",null,"Бонус",-1);function rn(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",Ya,[Object(n["h"])("div",Za,[Object(n["h"])("div",en,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.current=e}),class:"plain w-100",type:"number",max:a.character.healthMax,min:"0",onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["max"]),[[n["n"],i.current]])]),tn,Object(n["h"])("div",an,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.max=e}),class:"plain w-100",type:"number",min:"0",disabled:a.character.settings.locked,onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["disabled"]),[[n["n"],i.max]])])]),nn,Object(n["h"])("div",cn,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.bonus=e}),class:"plain w-100",type:"number",min:"0",onChange:t[6]||(t[6]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,544),[[n["n"],i.bonus]])]),sn])}var on={name:"health",props:{character:I},data:function(){return{current:0,max:0,bonus:0}},methods:{setData:function(){this.current>this.max&&(this.current=this.max),Object.assign(this.character,{health:this.current}),Object.assign(this.character,{healthBonus:this.bonus}),Object.assign(this.character,{healthMax:this.max})},getData:function(){this.current=this.character.health,this.bonus=this.character.healthBonus,this.max=this.character.healthMax}},watch:{character:{handler:function(){this.getData()},deep:!0,immediate:!0}}};on.render=rn;var ln=on,dn={class:"small my-2 mx-auto border px-2 py-1 bones rounded text-start"},hn=Object(n["g"])(" Кость здоровья "),un={class:"plain float-end fw-bold pe-2"},bn={class:"d-flex justify-content-center"},mn=Object(n["h"])("span",null,"/",-1),pn={class:"plain w-25"};function fn(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])("div",dn,[hn,Object(n["h"])("span",un," d"+Object(n["l"])(a.character.class.bone),1),Object(n["h"])("div",bn,[Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.bones=e}),class:"plain w-25",type:"number",min:"0",max:a.character.level,onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)})},null,40,["max"]),[[n["n"],i.bones]]),mn,Object(n["h"])("span",pn,Object(n["l"])(a.character.level),1)])])}var vn={name:"health-bones",props:{character:I},data:function(){return{bones:0}},methods:{setData:function(){this.bones>this.character.level?this.bones=this.character.level:this.bones<0&&(this.bones=0),Object.assign(this.character,{healthBones:this.bones})},getData:function(){this.bones=this.character.healthBones}},watch:{character:{handler:function(){this.getData()},deep:!0,immediate:!0}}};vn.render=fn;var jn=vn,On=Object(n["h"])("div",null,"Долгий отдых",-1),gn=Object(n["h"])("i",{class:"fas fa-bed px-4"},null,-1);function yn(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])(n["a"],null,[On,Object(n["h"])("div",{class:"btn loading-bar btn-sm text-center text-success border-success border-2",onTouchstart:t[1]||(t[1]=function(){return s.start&&s.start.apply(s,arguments)}),onTouchend:t[2]||(t[2]=function(){return s.end&&s.end.apply(s,arguments)}),onMousedown:t[3]||(t[3]=function(){return s.start&&s.start.apply(s,arguments)}),onMouseup:t[4]||(t[4]=function(){return s.end&&s.end.apply(s,arguments)}),style:"--percent:"+i.percent+"%"},[gn],36)],64)}var kn={name:"rest",data:function(){return{percent:0,toggled:!1}},props:{character:I,headerMessage:T},methods:{longRest:function(){this.headerMessage.showSuccess("Персонаж успешно отдохнул"),this.character.longRest(),this.$parent.getData()},start:function(){this.toggled=!0,this.timer()},end:function(){this.toggled=!1,this.percent=0},timer:function(){this.toggled&&(100!=this.percent?(this.percent+=4,setTimeout(this.timer,50)):this.longRest())}}};kn.render=yn;var xn=kn,wn={name:"top-info",props:{character:I,headerMessage:T},data:function(){return{race:"",name:"",story:"",masterInspiration:Boolean,bardInspiration:Number,level:Number,alignment:Number,size:Number,characterClass:v,locked:Boolean}},methods:{classOptions:function(){return new w(v.Unknown).all},setData:function(){Object.assign(this.character,{race:this.race}),Object.assign(this.character,{name:this.name}),Object.assign(this.character,{size:this.size}),Object.assign(this.character,{story:this.story}),Object.assign(this.character,{level:this.level}),Object.assign(this.character,{alignment:this.alignment}),Object.assign(this.character,{class:new w(this.characterClass)}),Object.assign(this.character,{masterInspiration:this.masterInspiration}),Object.assign(this.character,{bardInspiration:this.bardInspiration})},getData:function(){this.locked=this.character.settings.locked,this.race=this.character.race,this.name=this.character.name,this.size=this.character.size,this.level=this.character.level,this.story=this.character.story,this.alignment=this.character.alignment,this.masterInspiration=this.character.masterInspiration,this.characterClass=this.character.class.type},toggleInspiration:function(){this.masterInspiration=!this.masterInspiration,this.setData()},longRest:function(){this.$parent.longRest()}},watch:{character:{handler:function(){this.getData()},deep:!0,immediate:!0}},components:{derivatives:Xa,health:ln,rest:xn,healthBones:jn}};wn.render=Pa;var Sn=wn,Dn={class:"flex-grow-1"},Mn={class:"text-start mx-auto d-inline-block p-1"},Cn={class:"d-inline-flex p-1"},Nn=Object(n["h"])("option",{value:"-1"},"Нет",-1),In=Object(n["h"])("option",{value:"3"},"Инт",-1),Un=Object(n["h"])("option",{value:"4"},"Муд",-1),Vn=Object(n["h"])("option",{value:"5"},"Хар",-1),Bn=Object(n["g"])(" Заклинательная характеристика "),An=Object(n["h"])("br",null,null,-1),Tn={class:"d-inline-flex p-1"},En=Object(n["h"])("option",{value:"0"},"Нет",-1),Pn=Object(n["g"])(" Максимальная ячейка "),Ln=Object(n["h"])("br",null,null,-1),Hn={class:"d-inline-flex p-1"},Rn={class:"hex me-2 text-center",style:{"--color":"350deg"}},_n=Object(n["g"])(" Модификатор атак "),zn=Object(n["h"])("br",null,null,-1),Fn={class:"d-inline-flex p-1"},Jn={class:"hex me-2 text-center",style:{"--color":"330deg"}},Wn=Object(n["g"])(" Сложность спасбросков "),$n={key:0,class:"row mx-0"},qn={class:"row mx-0"},Gn={class:"col-12 col-md-6 my-2"},Kn={key:0},Qn=Object(n["h"])("i",{class:"fas fa-trash me-2"},null,-1),Xn=Object(n["g"])(" Удалить "),Yn={key:1},Zn=Object(n["h"])("i",{class:"fas fa-trash me-2"},null,-1),ec=Object(n["g"])(" Удалить "),tc=Object(n["h"])("i",{class:"fas fa-times me-2"},null,-1),ac=Object(n["g"])(" Отмена ");function nc(e,t,a,c,i,s){var r=this,o=Object(n["k"])("magic-slot");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",Dn,[Object(n["h"])("div",Mn,[Object(n["h"])("div",Cn,[Object(n["p"])(Object(n["h"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.magicAttribute=e}),class:"plain block me-2",onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)}),style:{"--color":"250deg"}},[Nn,In,Un,Vn],544),[[n["m"],i.magicAttribute]]),Bn]),An,Object(n["h"])("div",Tn,[Object(n["p"])(Object(n["h"])("select",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.magicLimit=e}),class:"plain block me-2",onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)}),style:{"--color":"200deg"}},[En,(Object(n["i"])(),Object(n["d"])(n["a"],null,Object(n["j"])(10,(function(e,t){return Object(n["h"])("option",{key:t,value:e},Object(n["l"])(t),9,["value"])})),64))],544),[[n["m"],i.magicLimit]]),Pn]),Ln,Object(n["h"])("div",Hn,[Object(n["h"])("div",Rn,Object(n["l"])(a.character.magicBonus),1),_n]),zn,Object(n["h"])("div",Fn,[Object(n["h"])("div",Jn,Object(n["l"])(a.character.spellDifficulty),1),Wn])]),i.magicLimit>0?(Object(n["i"])(),Object(n["d"])("div",$n,[(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(i.magicLimit,(function(e,t){return Object(n["i"])(),Object(n["d"])("div",{key:t,class:"col-12 col-md-6 my-2"},[Object(n["h"])(o,{magicSlot:a.character.magicSlots[t],index:t,deleteMode:i.deleteMode,name:0==t?"Заговоры":t+" ячейка",locked:a.character.settings.locked},null,8,["magicSlot","index","deleteMode","name","locked"])])})),128))])):Object(n["e"])("",!0),Object(n["h"])("div",qn,[Object(n["h"])("div",Gn,[Object(n["h"])(o,{magicSlot:s.otherSpells(),index:10,deleteMode:i.deleteMode,name:"Прочие заклинания",locked:a.character.settings.locked},null,8,["magicSlot","deleteMode","locked"])])])]),i.deleteMode?Object(n["e"])("",!0):(Object(n["i"])(),Object(n["d"])("div",Kn,[Object(n["h"])("button",{class:"btn btn-danger m-2 pe-3",onClick:t[5]||(t[5]=function(){return s.openDeleteMode&&s.openDeleteMode.apply(s,arguments)})},[Qn,Xn])])),i.deleteMode?(Object(n["i"])(),Object(n["d"])("div",Yn,[Object(n["h"])("button",{class:"btn btn-danger m-2 pe-3",onClick:t[6]||(t[6]=function(){return s.confirmDelete&&s.confirmDelete.apply(s,arguments)})},[Zn,ec]),Object(n["h"])("button",{class:"btn btn-secondary m-2 pe-3",onClick:t[7]||(t[7]=function(e){return r.deleteMode=!1})},[tc,ac])])):Object(n["e"])("",!0)],64)}var cc={class:"card border"},ic={class:"card-header border-bottom d-flex justify-content-between px-1 bg-primary text-white"},sc=Object(n["h"])("i",{class:"fas fa-eye text-white pt-1 my-1 px-3"},null,-1),rc={class:"flex-grow-1 text-start"},oc={class:"border-bottom border-white px-1 h-100"},lc={key:0,class:"d-flex"},dc=Object(n["h"])("span",{class:"py-1"},"/",-1),hc={key:0},uc={key:1,class:"text-start mt-2"},bc=Object(n["h"])("i",{class:"fas fa-plus-circle"},null,-1);function mc(e,t,a,c,i,s){var r=Object(n["k"])("spell");return Object(n["i"])(),Object(n["d"])("div",cc,[Object(n["h"])("div",ic,[Object(n["h"])("div",{"data-bs-toggle":"collapse","data-bs-target":".collapse_"+a.index},[sc],8,["data-bs-target"]),Object(n["h"])("div",rc,[Object(n["h"])("div",oc,Object(n["l"])(a.name),1)]),a.index>0&&a.index<=9?(Object(n["i"])(),Object(n["d"])("div",lc,[Object(n["p"])(Object(n["h"])("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.uses=e}),onChange:t[2]||(t[2]=function(){return s.setData&&s.setData.apply(s,arguments)}),class:"plain w-50px text-white",min:"0"},null,544),[[n["n"],i.uses]]),dc,Object(n["p"])(Object(n["h"])("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.limit=e}),onChange:t[4]||(t[4]=function(){return s.setData&&s.setData.apply(s,arguments)}),class:"plain w-50px text-white",min:"0"},null,544),[[n["n"],i.limit]])])):Object(n["e"])("",!0)]),Object(n["h"])("div",{class:"card-body p-1 collapse show collapse_"+a.index},[0==a.magicSlot.spells.length?(Object(n["i"])(),Object(n["d"])("div",hc,"Ничего не изучено")):Object(n["e"])("",!0),(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(a.magicSlot.spells,(function(e,t){return Object(n["i"])(),Object(n["d"])("div",{key:t},[Object(n["h"])(r,{spell:e,index:t,magicSlot:a.magicSlot,deleteMode:a.deleteMode,locked:a.locked},null,8,["spell","index","magicSlot","deleteMode","locked"])])})),128)),a.locked?Object(n["e"])("",!0):(Object(n["i"])(),Object(n["d"])("div",uc,[Object(n["h"])("button",{class:"btn btn-success p-1 btn-sm lh-0",onClick:t[5]||(t[5]=function(){return s.addItem&&s.addItem.apply(s,arguments)})},[bc])]))],2)])}var pc={class:"d-flex my-1"},fc={key:0,class:"block light mt-1 mx-1"},vc={key:0,class:"fas fa-times"},jc={class:"d-flex my-1 py-1"},Oc=Object(n["h"])("i",{class:"fas fa-comment-dots mx-2 h4"},null,-1),gc=Object(n["h"])("i",{class:"fas fa-hand-paper mx-2 h4"},null,-1),yc=Object(n["h"])("i",{class:"fas fa-magic mx-2 h4"},null,-1),kc=Object(n["h"])("i",{class:"fas fa-clock mx-2 h4"},null,-1);function xc(e,t,a,c,i,s){return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",pc,[Object(n["h"])("div",{onClick:t[1]||(t[1]=function(e){return i.editModel.marked=!i.editModel.marked})},[Object(n["h"])("i",{class:"px-1 py-2 "+(i.editModel.marked?"fas fa-circle":"far fa-circle")},null,2)]),Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.editModel.name=e}),class:"border-0 px-1 border-bottom flex-grow-1",placeholder:"Название",disabled:a.locked},null,8,["disabled"]),[[n["n"],i.editModel.name]]),a.deleteMode?(Object(n["i"])(),Object(n["d"])("div",fc,[Object(n["h"])("div",{onClick:t[3]||(t[3]=function(e){return i.editModel.delete=!i.editModel.delete}),class:"w-100 h-100"},[a.spell.delete?(Object(n["i"])(),Object(n["d"])("i",vc)):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)]),Object(n["h"])("div",jc,[Object(n["h"])("div",{onClick:t[4]||(t[4]=function(e){return a.locked?null:i.editModel.verbal=!i.editModel.verbal}),class:i.editModel.verbal?"":"op-05"},[Oc],2),Object(n["h"])("div",{onClick:t[5]||(t[5]=function(e){return a.locked?null:i.editModel.somatic=!i.editModel.somatic}),class:i.editModel.somatic?"":"op-05"},[gc],2),Object(n["h"])("div",{onClick:t[6]||(t[6]=function(e){return a.locked?null:i.editModel.material=!i.editModel.material}),class:i.editModel.material?"":"op-05"},[yc],2),Object(n["p"])(Object(n["h"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.editModel.components=e}),class:"border-0 px-1 border-bottom flex-grow-1",placeholder:"",disabled:a.locked},null,8,["disabled"]),[[n["n"],i.editModel.components]]),Object(n["h"])("div",{onClick:t[8]||(t[8]=function(e){return a.locked?null:i.editModel.ritual=!i.editModel.ritual}),class:i.editModel.ritual?"":"op-05"},[kc],2)])],64)}var wc={name:"spell",props:{spell:M,magicSlot:C,index:Number,deleteMode:Boolean,locked:Boolean},data:function(){return{editModel:M}},methods:{getData:function(){this.editModel=this.spell},setData:function(){Object.assign(this.spell,{name:this.editModel.name}),Object.assign(this.spell,{delete:this.editModel.delete})}},watch:{spell:{handler:function(){this.getData()},deep:!0,immediate:!0},editModel:{handler:function(){this.setData()}}},components:{}};wc.render=xc;var Sc=wc,Dc={name:"magic-slot",props:{magicSlot:C,index:Number,deleteMode:Boolean,name:String,locked:Boolean},data:function(){return{limit:Number,uses:Number,delete:Boolean}},methods:{getData:function(){this.limit=this.magicSlot.limit,this.uses=this.magicSlot.uses,this.delete=this.magicSlot.delete},setData:function(){Object.assign(this.magicSlot,{uses:this.uses}),Object.assign(this.magicSlot,{limit:this.limit}),Object.assign(this.magicSlot,{delete:this.delete})},addItem:function(){this.magicSlot.addItem()},toggleDelete:function(){this.delete=!this.delete,this.magicSlot.toggleDeleteMode(!0),this.setData()}},watch:{magicSlot:{handler:function(){this.getData()},deep:!0,immediate:!0}},components:{spell:Sc}};Dc.render=mc;var Mc=Dc,Cc={name:"slots-list",props:{character:I},data:function(){return{deleteMode:!1,magicAttribute:Number,magicLimit:Number}},methods:{getData:function(){this.magicAttribute=this.character.magicAttribute,this.magicLimit=this.character.magicLimit},addContainer:function(){this.character.addContainer()},openDeleteMode:function(){this.deleteMode=!0},confirmDelete:function(){this.deleteMode=!1,this.character.clearSpells()},setData:function(){Object.assign(this.character,{magicAttribute:this.magicAttribute}),Object.assign(this.character,{magicLimit:this.magicLimit})},otherSpells:function(){return this.character.magicSlots[this.character.magicSlots.length-1]}},watch:{character:{handler:function(){this.getData()},deep:!0,immediate:!0}},components:{magicSlot:Mc}};Cc.render=nc;var Nc=Cc,Ic={name:"character",data:function(){return{character:I,encoder:A,headerMessage:T,version:"v1.1.0",tab:1,icons:["id-card","running","suitcase","hand-sparkles","cog"],saveService:Me}},methods:{importCharacter:function(e,t){this.character=this.saveService.importCharacter(e,t,this.headerMessage)},clearCharacter:function(){this.character=new I},loadSave:function(){var e=this.saveService.saveSlots[0].value;this.importCharacter(e,256)},autoSave:function(){this.character.settings.autoSavesEnabled&&(this.headerMessage.showSuccess("Автосохранение завершено"),this.saveService.applySave(this.character,0)),setTimeout(this.autoSave,this.character.settings.autoSavesInterval)}},created:function(){this.encoder=new A,this.headerMessage=new T,this.saveService=new Me,this.loadSave(),setTimeout(this.autoSave,this.character.settings.autoSavesInterval)},components:{footerMenu:We,headerMessage:Xe,attributesList:Yt,mainInfo:Sn,inventory:Bt,slotsList:Nc}};Ic.render=b;var Uc=Ic,Vc={name:"App",components:{character:Uc}};a("15cb");Vc.render=i;var Bc=Vc;a("4989");Object(n["c"])(Bc).mount("#app")}});
//# sourceMappingURL=app.526207c5.js.map