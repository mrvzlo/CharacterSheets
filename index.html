<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">  
        <link href="style.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="https://kit.fontawesome.com/5434606b68.js" crossorigin="anonymous"></script>
    </head>
    <body class="m-3 mb-5">
        <div id="app">
            <div class="text-center row">
                <div class="col-12">
                    <div class="alert alert-secondary">
                        <input v-model="character.name" class="plain w-100 border-bottom py-2" placeholder="Имя персонажа" :disabled="locked">
                    </div>
                </div>
                <div class="col-3">
                    <div class="alert alert-warning">
                        <input v-model="character.level" class="plain w-100 border-bottom" type="number" min="1" max="20" :disabled="locked">
                        <div class="small text-secondary">Уровень</div>
                    </div>
                </div>
                <div class="col-5">
                    <div class="alert alert-warning">
                        <input v-model="character.race" class="plain w-100 border-bottom" :disabled="locked">
                        <div class="small text-secondary">Раса</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="alert alert-warning">
                        <input v-model="character.class" class="plain w-100 border-bottom" :disabled="locked">
                        <div class="small text-secondary">Класс</div>
                    </div>
                </div>
                <div class="col-9"></div>
                <div class="col-6 text-start">
                    <div class="d-flex mb-2">
                        <div class="hex me-2" style="--color: 250deg;" v-on:click="inspiration">                        
                            <span v-if="character.inspiration" class="fas fa-check"></span>    
                        </div> 
                        Вдохновение
                    </div>
                    <div class="d-flex mb-2">
                        <div class="hex me-2" style="--color: 300deg;">           
                            {{character.proficiency()}}
                        </div> 
                        Мастерство
                    </div>
                </div>
                <div class="col-6 text-start">
                    <div class="d-flex mb-2">
                        <div class="hex me-2" style="--color: 40deg;">    
                            <input v-model="character.armor" class="plain w-100" type="number" :disabled="locked">  
                        </div> 
                        Класс брони
                    </div>
                    <div class="d-flex mb-2">
                        <div class="hex me-2" style="--color: 150deg;">
                            <input v-model="character.speed" class="plain w-100" type="number" :disabled="locked">    
                        </div> 
                        Скорость
                    </div>
                </div>
                <div class="col-12" v-for="attribute in character.attributes">
                    <div class="row mb-1 py-1 border-top">
                        <div class="col-3 my-2">
                            <div class="hex gray">    
                                <input v-model="attribute.value" class="plain w-100" type="number" min="1" max="20" :disabled="locked">    
                            </div> 
                            <div class="border pt-3 pb-1 rounded-4 d-flex flex-column mt-n3">
                                <div></div>
                                <h1 class="m-0">{{attribute.bonus()}}</h1>
                                {{attribute.name}}
                            </div>
                            <div v-if="attribute.name == 'МУД'" class="small">Пассив {{10+attribute.bonus()}}</div>
                        </div>
                        <div class="text-start col-9 p-0 d-flex flex-column justify-content-center">
                            <div v-on:click="locked ? '' : check.inc()" class="inline-flex check" v-for="check in attribute.getChecks(checkTypes.Saving)">
                                <div :class="'text-info '+ check.level()"></div>
                                <span class="bonus px-1" class="text-center">
                                    {{check.get(character.proficiency(), attribute.bonus())}}
                                </span>                                                                
                                <span class="small">{{check.name}}</span>
                            </div>
                            <div v-on:click="locked ? '' : ''" class="inline-flex check" v-for="check in attribute.getChecks(checkTypes.Static)">
                                <div class="text-success fas fa-circle"></div>
                                <span class="bonus px-1" class="text-center">
                                    {{check.get(character.proficiency(), attribute.bonus())}}
                                </span>                                                             
                                <span class="small">{{check.name}}</span>
                            </div>                         
                            <div v-on:click="locked ? '' : check.inc()" class="inline-flex check" v-for="check in attribute.getChecks(checkTypes.Skill)">
                                <div :class="check.level()"></div>
                                <span class="bonus px-1" class="text-center">{{check.get(character.proficiency(), attribute.bonus())}}</span>
                                <span class="small">{{check.name}}</span>
                            </div>                            
                            <div v-if="attribute.name == 'ТЕЛ'" class="small my-2 border p-1 bones rounded">
                                Кость здоровья
                                <select v-model="character.healthBoneValue" class="plain float-end fw-bold">
                                    <option value="6">Д6</option>
                                    <option value="8">Д8</option>
                                    <option value="10">Д10</option>
                                    <option value="12">Д12</option>
                                </select>
                                <div class="d-flex justify-content-center">
                                    <input v-model="character.healthBones" class="plain w-25" type="number" min="0" :max="character.healthBonesMax" :disabled="locked">  
                                    <span>/</span>
                                    <input v-model="character.healthBonesMax" class="plain w-25" type="number" min="1" max="20" :disabled="locked">  
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="position-fixed bottom-0 end-0 mx-2 d-flex">
                <div class="border-0 menu collapse">
                    <div class="btn btn-secondary me-1"><i class="fas fa-fw fa-upload"></i></div>
                    <div class="btn btn-secondary me-1"><i class="fas fa-fw fa-download"></i></div>
                    <div class="btn btn-secondary me-1"><i class="fas fa-fw fa-save"></i></div>
                    <div class="btn btn-secondary me-1"><i class="fas fa-fw fa-redo"></i></div>
                    <div class="btn btn-warning me-2" v-on:click="lock">
                        <i :class="'fas fa-fw '+(locked ? 'fa-unlock': 'fa-lock')"></i>
                    </div>
                </div>
                <div class="mb-2" data-bs-toggle="collapse" href=".menu"><i class="fas fa-cog fa-2x"></i></div>
            </div>
        </div>
        <script src="character.js"></script>
        <script src="core.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    </body>
</html>